# 编译器、连接器和库的介绍

继续我们对上节课的讨论

![The software development process](https://blogimg.ficapy.com/learncpp/Development-min-20201222105954650.png)

我们来讨论一下4-7步。

# 步骤4：编译你的源代码

为了编译一个C++程序，我们使用C++编译器。C++编译器按照顺序检查程序中的每一个源代码(.cpp)文件，并完成两项重要任务。

首先，它检查你的代码，确保它遵守C++语言规则，如果不遵守，编译器会给你一个错误(以及相应的行号)来帮助你确定需要修改的地方。编译过程也会被终止，直到错误被修复。

其次，它将你的C++源代码翻译成一个机器语言文件，称为对象文件(object file)。对象文件通常命名为name.o或者name.obj，其中name与它产生的.cpp文件名相同。

如果你的程序有三个.cpp文件，编译器会生成三个对象文件。

![The compilation process](https://blogimg.ficapy.com/learncpp/CompileSource-min.png)

C++编译器可以用于许多不同的操作系统。我们稍后将讨论如何安装编译器，所以现在没必要做这个

# 步骤5：链接对象文件和库

编译器创建了一个或者多个对象文件之后，另一个叫做链接器的程序开始工作。链接器的工作有三个方面。

首先，要把编译器生成的所有对象文件，组合成一个可执行程序。

![The linking process](https://blogimg.ficapy.com/learncpp/LinkingObjects-min.png)

其次，除了能够链接对象文件之外，链接器还能够链接库文件。库文件是预先编译代码的集合，这些代码已经被`“打包”`，方便在其他程序中重复使用。

C++的核心语言其实是相当小而简洁的(在这些教程中你会学到很多)。然而，C++还附带了一个扩展库，称为C++**`标准库`**(通常简称为标准库)，它提供了额外的功能，你可以在你的程序中使用，C++标准库中最常用的部分之一是iostream库，它能够在显示器上打印文本和从用户获取键盘的输入。几乎所有编写的C++程序都以某种形式利用了标准库，所以标准库被链接到你的程序中是很常见的。只要你使用了标准库的任何部分，大部分链接器都会自动链接。所以一般情况下你不需要担心这个问题。

你也可以选择性地链接其他库。比如，如果你要写一个播放声音的程序，你可能不想自己写代码来从磁盘上读取声音文件，检查以确保文件是有效的，或者搞清楚如何将声音数据发送到操作系统或硬件以通过扬声器播放 - - 那将是一个很大的工程！相反，你可能会下载一个已经知道如何做这些事情的库，并使用它。我们将在附录中讨论如何链接库，以及创建你自己的库！

第三，链接器确保所有跨文件的依赖关系都被正确解决。例如，如果你在一个.cpp文件中定义了某个东西，然后在另外一个.cpp文件中使用它。链接器会把这两个文件连接起来。如果链接器无法将一个引用和其定义关联在一起，你会得到一个链接器错误，然后链接过程会被终止。

一旦链接器完成了所有对象文件和库的链接(假设一切顺利)，你将有一个可执行文件，然后你就可以运行了！！！

> ### 给高级读者
>
> 对于复杂的项目，一些开发环境会使用makefile，这是一个描述如何构建程序的文件(例如，哪些文件需要编译和链接，或者以其他方式处理)。关于如何编写和维护makefile已经可以写一整本书了，它们可以是一个非常强大的工具，然而，由于makefile不是C++核心语言的一部分，在本教程后续也不会用它来处理，所以我们不会在本系列教程中讨论它们。

# 步骤6和7：测试和调试

这是有趣的部分(希望如此)！你可以运行你的可执行文件，看看它们是否产生了你所期望的输出!

如果你的程序运行但是并不能正常工作，那么就需要运行一些调试来找出问题所在。我们将很快详细的讨论如何测试你的程序以及如何调试它们。

# 集成开发环境

请注意，步骤3、4、5和7都涉及到软件(编辑器、编译器、链接器、调试器)。虽然你可以用独立的程序分开来进行这些操作。但一个被称为集成开发环境(IDE)的软件包将所有这些功能捆绑和集成在一起。我们将在下一节讨论IDE，并安装一个IDE。

