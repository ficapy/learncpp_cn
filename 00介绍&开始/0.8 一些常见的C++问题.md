# 一些常见的C++问题

在本节中，我们将讨论一些新手程序员似乎相当高概率遇到的常见问题。这并不是一个全面的编译或者执行问题的清单，而是一个非常基础问题的解决方案实用清单。如果你对其他问题有任何建议，请在下面的评论部分发表。

# 运行时问题

> 问：执行程序的时候，窗口闪了一下就关闭了
>
> 首先，在程序的顶部添加下列代码(Visual Studio用户，确保这些代码出现在`#include "pch.h"`或者`#include stdafx.h`之后，如果它们存在的话)：
>
> ```c++
> #include <iostream>
> #include <limits>
> ```
>
> 其次，在mian()函数的末尾添加以下代码(放在return语句的前面)
>
> ```c++
> std::cin.clear(); // 重置任何错误标志
> std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');  // 忽略输入缓冲区中的任何字符，直到找到换行符
> std::cin.get();  // 从用户那里再获取一个字符
> ```
>
> 这让你的程序在继续之前等待用户按下一个键，使你有时间在IDE关闭控制台之前检查你的程序的输出。
>
> 其他的解决方案，如通常建议的 `system("pause")`解决方案可能只能在某些操作系统上有效，应该避免使用。
>
> 旧版本的Visual Studio在启动调试模式下运行程序可能无法暂停，尝试在 `启动而不调试` 模式下运行

> 问：我运行我的程序，得到一个窗口，但是没有输出。
>
> 你的杀毒软件可能会阻止执行，尝试禁用它，看看是否是这个问题。

> 问：程序正常编译了，但是它不能正常工作，我该怎么做？
>
> 调试吧！第三章有关于如何诊断和调试程序的提示。

# 编译时问题

> 问：当我编译程序的时候，我得到一个关于未解决外部符号`_main`或者`_WinMain@16`的错误
>
> 这意味着你的编译器找不到miain()函数，所有的程序都必须包含一个main()函数。
>
> 这里有几件事情需要检查
>
> 1. 你的代码是否包含一个名为main的函数
> 2. main的拼写是否正确
> 3. 当你编译你的程序的时候，你是否看到包含main()的文件被编译了？如果没有，要么把main()函数移动一下，要么将该文件添加到项目目录中(参见课程2.8 -- 有多个代码文件的程序)
> 4. 你是否创建了一个控制台项目？尝试创建一个新的控制台项目

> 问：我想使用C++11/14/17/xx的功能，却无法使用
>
> 如果你的编译器是旧的，它可能不支持这些比较新的特性。在这种情况下，请升级你的编译器。
>
> 对于现代IDE/编译器来说，你的编译器可能会默认使用旧的语言标准。我们在课程(0.12 -- 配置你的编译器: 选择语言标准)中介绍如何改变你的语言标准

> 问：当试图使用cin、cout或者endl时，编译器说cin、cout或者endl时一个`未声明的标识符`
>
> 首先，确保你在文件顶部附近加入了这一行
>
> ```c++
> #include <iostream>
> ```
>
> 其次，确保每次使用cin、cout和endl时都以`std::`作为前缀。比如:
>
> ```c++
> std::cout << "Hello World!" << std::endl;
> ```
>
> 如果这不能解决你的问题，那么可能是你的编译器过期了，或者安装损坏了，尝试重新安装或者升级到最新版本。

> 问：当试图使用endl来结束一个打印行时，编译器说end1是一个`未声明的标识符`
>
> 确保你不会把endl中的字母l(小写的L)误认为是数字1, endl是所有字母。确保你的编辑器使用的字体能够清楚地区分字母小写L、大写i和数字1之间的区别。字母大写o和数字0在许多非编程字体中很容易混淆。

# Visual Studio问题

> 问：用MicroSoft Visual C++编译时，得到一个C1010致命错误,错误信息为 `c:\vcprojects\test.cpp(263) :fatal error C1010: unexpected end of file while looking for precompiled header directive`
>
> 当MicroSoft Visual C++编译器被设置为使用预编译头，但时你的一个或者多个C++代码文件没有将`#include "stdafx.h"`或者`#include "pch.h"`作为代码文件的第一行，就会发生这个错误。
>
> 我们建议的修复方法时关闭预编译头，我们在上一节展示了该怎么做。
>
> 如果你想让预编译头保持开启状态，要解决这个问题，只需要找到产生错误的文件(在上面的错误中，test.cpp时罪魁祸首)，并在文件的顶部添加下面这行
>
> ```c++
> #include "pch.h"
> ```
>
> 旧版本的Visual Studio使用`"stdafx.h"`替代`"pch.h"`，所以如果pch.h不能解决问题，试试stdafx.h。
>
> 需要注意的是，对于有多个文件的程序，每个C++代码文件都需要从这一行开始。
>
> 另外，你也可以关闭预编译头。

> 问：Visual Studio给出了以下错误: ` "1MSVCRTD.lib(exe_winmain.obj) : error LNK2019: unresolved external symbol _WinMain@16 referenced in function "int __cdecl invoke_main(void)" (?invoke_main@@YAHXZ)"`
>
> 你可能创建了一个Windows图形应用程序，而不是一个控制台应用程序，重新创建你的项目，并确保将其创建为Windows(或者Win32)控制台项目。

> 问：当我编译程序的时候，我收到`无法找到或者打开PDB文件`的警告
>
> 这是一个警告，而不是一个错误。所以它不应该影响你的程序。然而，它是令人讨厌的。要解决这个问题，进入调试菜单 -->> 选项和设置 -->> 符号，选择`Microsoft Symbol Server`

# 其他

> 问：我还有以下问题不明白，怎样才能得到快速答复?
>
> 在你阅读文章的过程中，毫无疑问你会遇到问题或遇到意想不到的事情。下一步该怎么做取决于你的问题。但是总的来说，有几件事情你可以试一试。
>
> 首先，问谷歌。找到一个好的短语来描述你的问题，并进行谷歌搜索。如果你收到了错误消息，使用引号将确切的消息粘贴到谷歌中，很可能已经有人问过同样的问题，而且还有一个答案在等着你。
>
> 如果不行的话，可以在问答版上提问，有一些专门为编程问题和答案设计的网站，比如[StackOverflow](https://www.stackoverflow.com/)，试着在那里发布你的问题，记住要彻底说明白你的问题，并包括所有相关的消息，比如你使用的操作系统和IDE。