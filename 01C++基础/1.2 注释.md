# 注释

注释是给程序员可读的笔记，直接插入到程序的源代码中。注释被编译器忽略，只供程序员使用。

在C++中有两种不同风格的注释，这两种注释的目的是一样的：帮助程序员以某种方式记录代码。

# 单行注释

`//`符号是C++单行注释的开头，它告诉编译器忽略从`//`符号到行尾的所有内容。比如：

```c++
std::cout << "Hello World!";  // 从这里到结尾的任何内容都被忽略
```

通常情况下，单行注释用于对单行代码进行快速注释。

```c++
std::cout << "Hello World!\n";                //  std::cout 位于iostream库中
std::cout << "It is very nice to meet you!\n" //  这些注释让代码难以阅读
std::cout << "Yeah!\n";                       // 你不这样认为吗?
```

但是，如果行很长，将注释放在右边会让你的行更长。在这种情况下，单行注释通常放在代码上方:

```c++
// std::cout 位于iostream库中
std::cout << "Hello World!\n";
// 这些注释让代码更容易阅读
std::cout << "It is very nice to meet you!\n";
// 你不这样认为吗?
std::cout << "Yeah!\n";
```

> ### 作者笔记
>
> 上面的代码来自于上一小节。因为代码片段不是完成的程序，所以它们不能被编译。相反，它们的存在是为了以简洁的方式展示特定的概念。
>
> 如果你想编译一个代码段，你需要把它变成一个完整的程序才能编译。通常情况下，该程序会像下面这个样子:
>
> ```c++
> #include <iostream>
> 
> int main()
> {
>   // 将改行替换成你想要编译的代码片段
>   
>   return 0;
> }
> ```

# 多行注释

符号`/*`和`*/`表示C风格多行注释。符号之间的所有内容都将被忽略。

```c++
/* 这是一个多行注释
   这一行将被忽略
	 该行也是 */
```

由于符号之间的所有内容都会被忽略，所以有时你会看到程序员对多行注释进行`美化`

```
/* 这是一个多行注释
 * 左侧的星号
 * 让注释看的更爽
 */
```

多行注释不能嵌套。因此，以下情况会产生意想不到的结果。

```c++
/* 这是一个多行 /* 注释 */ 这里不在注释里面 */
// 上面的注释在第一个 */ 就结束了，不是在第二个 */
```

当编译器试图编译这个的时候，它将忽略从第一个`/*`到第一个`*/`的所有内容。由于`这里不在注释里面 */`不被认为是注释的一部分，编译器将尝试编译它。这将不可避免地导致一个编译错误。

这是语法高亮真正有用的地方，因为注释的不同颜色会清楚的表明什么是注释，什么不是。

> ### 警告
>
> 不要嵌套使用多行注释，在多行注释里面嵌套单行注释是可以的。

# 正确使用注释

通常情况下，注释应该用来做三件事情。首先，对于一个给定的库、程序或者函数，注释最好用来描述这个库、程序或函数的作用。这些注释通常放在文件或者库的顶部，或者紧靠函数的开头，比如说

```c++
// 这个程序根据学生的考试和作业成绩计算学生的期末成绩
// 这个函数使用牛顿法近似计算给定方程的根
// 以下几行基于稀缺性、等级和权重因子生成随机物品
```

所有这些注释让读者不用看实际的代码，就能很好地了解这个库、程序或函数想要达到的目的。用户(可能是其他人，或者是你，如果你想重用你以前写过的代码)可以一眼就知道这些代码是否与他或她想要完成的事情相关。当作为团队的一部分工作时，这一点非常重要，因为不是每个人都会熟悉所有的代码。

其次，在上述的库、程序或者函数中，可以用注释来描述代码如何实现其目标

```c++
/* 为了计算最终的分数，我们将所有期中和家庭作业分数
	 加权求和，然后除以分数的个数得到一个百分比，
	 该值时用来计算成绩的??? 翻译不通 */
```

```c++
// 为了生成一个随机项，我们将执行以下操作:
// 1）把所有东西都放在一个列表里
// 2）根据等级和权重因子计算每个项目的概率
// 3）选择一个随机数
// 4）找出该随机数对应的项目
// 5）返回选中的项目
```

这些注释让用户知道代码时如何实现其目标的，而不必了解每行代码的作用。

第三，在语句级别，注释应该用来描述代码执行某些操作的原因。垃圾的注释解释了代码正在执行的操作。如果你曾经编写过非常复杂的代码，需要用注释来解释一个语句在做什么，你可能需要重写你的语句，而不是注释它。

下面是一些糟糕的注释和一些好的注释的例子。

糟糕的注释：

```c++
// 设置sight为0
sight = 0;
```

原因：我们已经可以通过语句看到sight设置为0。

好的注释：

```c++
// 这个玩家刚刚喝了失明药水，现在什么也看不见
sight = 0;
```

原因: 现在我们终于知道为什么玩家的视线被设置为0了。

糟糕的注释:

```c++
// 计算物品的花费
cost = quantity * 2 * storePrice;
```

理由: 我们可以看出这是一个花费计算，但是为什么数量要乘以2？

好的注释:

```c++
// 我们需要将数量乘以2，因为它们是成对购买的
cost = quantity * 2 * storePrice;
```

原因：现在我们知道为什么这样算了。

程序员考虑是用一种方法解决问题，还是用另外一种方法去解决。评论提醒自己（或者告诉别人）你作出一个决定而不是另外一个的原因是个好方法。

好的评论：

```c++
// 我们决定使用链表代替数组
// 因为数组的插入操作很慢
```

```c++
// 我们将使用牛顿法来找到方程的根
// 因为没有确定的方法来求解这些方程
```

最后，注释应该以一种对不知道代码的人有意义的方式去编写，经常有程序员会说:"这很明显！我不会忘记这事儿的"。你猜怎么着？这并不明显，你会惊讶于你忘记的速度有多快 :)。你(或者其他人)以后会感谢你用人类语言写下你的代码是什么，如何做，为什么。阅读单行代码很容易。理解它们要实现的目标却不容易。

> ### 最佳实践
>
> 随意的注释你的代码，写注释就像对一个不知道代码是干啥的人说话一样。不要以为你会记得你为什么作出了这个特定的选择。

> ### 作者笔记
>
> 在本系列教程的其余部分，我们将在代码块中使用注释来引起你对特定事情的注意，或者帮助说明事情的工作原理(同时确保程序仍然可以编译)。敏锐的读者会注意到，按照上述标准，这些注释大部分都是可怕的....，当你阅读剩下的教程时，请记住，这些注释是出于教育目的，而不是试图展示好的注释是什么样子的。

# 注释代码

将一行或者多行代码转换为注释叫做`注释代码`。这提供了一种方便的方法来（暂时）将部分代码排除在编译后的程序中。

如果要对单行代码进行注释，只需要使用 // 注释，就可以将一行代码暂时变成注释。

未注释：

```c++
std::cout << 1;
```

注释:

```c++
// std::cout << 1;
```

要注释一个代码块，可以在多行代码上使用 // 或者`/* */`。

未注释

```c++
std::cout << 1;
std::cout << 2;
std::cout << 3;
```

注释：

```c++
// std::cout << 1;
// std::cout << 2;
// std::cout << 3;
```

或者

```c++
/*
std::cout << 1;
std::cout << 2;
std::cout << 3;
*/
```

你想这样做的原因有挺多:

1. 你正在编写一段新的代码，还不会编译。你需要运行程序。如果有编译器错误，编译器不会让你编译代码。将不会编译的代码注释掉，这样就可以运行它了。当你写好了，你可以取消注释，继续工作。
2. 你写了新代码，编译后却不能正常工作，而你没有时间去修复它，将出问题的代码注释掉，可以确保代码在修复之前不会触发其他的连带问题。
3. 找到代码的错误。如果一个程序没有产生预期的结果(或者崩溃)，有时候禁用部分代码会很有用，看看是否能够隔离导致它不能正常工作的原因，如果你注释了一行或者多行代码，而你的程序开始正常工作，那么很可能是你最后注释掉的代码有点问题。然后你就可以排查为什么这些代码会导致运行出现问题。
4. 你想用一段代码替换另一段代码。与其直接删掉原有的代码，不如注释掉，把它留在原地当作参考，知道你确定你的新代码正常工作，你就可以删掉你注释的代码。如果新代码不工作，你可以删掉新代码，并取消旧代码的注释，恢复到以前的代码。

在开发的时候，注释代码是很常见的一件事情，因此很多IDE都支持注释掉选中部分的代码，如何访问这个功能，因IDE而异。

> ### 对于Visual Studio用户
>
> 你可以通过 `编辑菜单` -->> `高级` -->> `注释(或者取消注释)`来进行注释和取消注释操作

> ### 对于Code::Blocks用户
>
> 你可以通过 `编辑菜单`-->>`注释/取消注释`来进行注释和取消注释操作

> ### 提示
>
> 如果你平时总是使用单行注释进行注释操作，那么你总是可以使用多行注释来注释你的代码-->>不会发生冲突。如果你平时喜欢用多行注释注释你的代码，那么你进行注释代码就富有挑战性 -->> 因为无法嵌套
>
> 如果你确实需要对包含多行注释的代码块进行快速注释，你可以考虑使用 `#if 0`预处理指令，我们将在2.10课 -- 与处理器介绍 中讨论

# 总结

- What:  在库，程序或者函数级别，使用注释描述干什么
- How: 在库，程序或者函数内部，使用注释描述怎么干
- Why: 在语句层面，使用注释来描述为什么这么干

