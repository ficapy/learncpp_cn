# 表达式介绍

# 表达式

考虑以下一系列语句

```c++
int x{2};         // 初始化x的值为2
int y{2+3};				// 初始化y的值为5
int z{(2*3)+4};		// 初始化z的值为10
int w{y};					// 初始化w的值为5（当前值是y变量的值）
```

这些语句中的每一条都定义了一个新的变量，并且使用一个值来初始化它。请注意，上面显示的初始化使用了各种不同的结构：字面量、变量和运算符。C++以某种方式将这些字面量、变量和运算符转换为一个单独的值，该值可用作变量的初始值。

所有的这些都有什么共同点呢？它们都利用了一种表达式。

`表达式`是由字面量、变量、运算符和显式函数调用的组合，它们产生一个单一的输出值。当一个表达式被执行时，表达式中的每一个术语都会被执行，醉倒剩下一个单一的值。这个单一的值就是表达式的结果。

下面是一些不同类型的表达式的例子，并注释说明它们如何求值：

```c++
2             // 2是一个字面量，值是2
"Hello World" // "Hello World"是一个字面量，值是"Hello World"
x    					// x是一个变量，值是x
2 + 3					// 2 + 3使用操作符连接，值是5
x = 2 + 3 		// 2 + 3的值是5， 该值赋值给变量x
std::cout << x// x的值是x, 然后将其输出到控制台
```

正如你看到的那样，字面量的值是根据自己的值来计算的。变量则是使用变量的值。我们还没有涉及到函数调用，但是在表达式的上下文中，函数调用会使用函数的返回值。而运算符则让我们可以将多个值组合在一起产生一个新的值。

请注意，表达式不使用分号结尾，而且不能自行编译。比如，如果你试图编译表达式x = 5，你的编译器会报错(缺少一个分号)。相反，表达式总是被用来求值。

比如，拿该语句来说:

```c++
int x{2 + 3}; // 2 +3是一个没有分号的表达式，分号位于该表达式语句的末尾
```

如果把该语句分解成语法，它就会像这样

```text
type identifier { expression };
```

类型可以是任何有效的类型(我们选择了int)。标识符可以是任何有效的名称(我们选择了x)。表达式可以是任何有效的表达式(我们选择了 2 + 3，它使用了两个字面量和一个运算符)。

### 主要见解

凡是在C++中可以使用值的地方，都可以使用表达式来替代，编译器会将表达式解析为值。

# 表达式语句

某些表达式(比如 x = 5)本身是有用的。然而，我们上面提到表达式必须是语句的一部分，那么我们如何能单独使用这些表达式呢？

幸运的是，我们可以将任何表达式转换成等价语句（称为表达式语句）。表达式语句是由一个表达式和一个分号组成的语句。当语句被执行的时候，表达式被求值(表达式的结果将被丢弃)。

因此，我们可以把任何表达式(比如 x = 5)，变成一个可以编译的表达式语句(比如 `x = 5;`)。

请注意，我们可以写出能编译，但是没有什么卵用的表达式语句(比如 `2*3;`)。这个表达式的值是6，然后值6被丢弃了。

### 规则

在表达式中计算的值在表达式结束的时候被丢弃。

# 测验

问题1:

语句和表达式的区别是什么?

问题2:

指出下面的语句是1. 不包含表达式的语句。2. 包含表达式的语句。3. 表达式语句

```c++
int x;
```
不包含表达式的语句(这只是定义一个变量)

```c++
int x = 5;
```
包含表达式的语句(等号右侧是包含单个值的表达式，但是其余部分不是表达式)

```c++
x = 5;
```
表达式语句(整个语句是一个表达式，以分号结尾)
```c++
std::count << x;
```
如果操作符<<是一个二元操作符，则std::cout必定是左侧操作数，x是右侧操作数。因为这是整个语句，所以这一定是一个表达式语句

问题3:

确定以下程序的输出值，请不要编译这个程序。你只需要在你的大脑里面一行一行的过一下就可以了

```c++
#include <iostream>

int main()
{
  std::cout << 2 + 3 << '\n';
  
  int x{6};
  int y{x-2};
  std::cout << y << '\n';
  
  int z{0};
  z = x;
  std::cout << z - x << '\n';
  
  return 0;
}
```

```text
5
4
0
```

