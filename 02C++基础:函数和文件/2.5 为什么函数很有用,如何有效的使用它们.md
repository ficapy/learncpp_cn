# 为什么函数很有用，如何有效的使用它们

现在我们已经介绍了什么是函数，以及它们的一些基本功能，让我们仔细看看为什么它们很有用。

# 为什么函数很有用

新手程序员经常会问: "我们不能把所有的代码都放在主函数里面吗？"，对于简单的程序而言，你绝对可以这样做。但是，函数提供了一些好处，使其在长度或者复杂度不高的程序中极为有用。

- `组织`，随着程序的复杂度越来越高，让所有的代码都在main()函数里面变得越来越复杂。一个函数几乎就像一个迷你程序，我们可以把它和主程序分开，而不用在写的时候考虑程序的其他部分。这使得我们可以将一个复杂的程序缩减成更小、更容易管理的块，从而降低我们程序的整体复杂性
- `可用性`，一旦一个函数被编写出来，它可以在程序中被多次使用，这就避免了重复的代码("Don't Repeat Yourself")，并将复制/粘贴错误的可能性降到最低。函数还可以和其他程序共享，减少了每次从头开始编写(和重新测试)的代码量。
- `测试`，因为函数减少了代码冗余，所以首先要测试的代码就减少了，同时也为函数是自成一体的，一旦我们测试了一个函数以确保它能正常工作，我们就不需要再次测试它，除非我们改变了它。这就减少了我们一次要测试的代码量，使得我们更容易发现bug(或者一开始就避免它们)
- `可扩展性`，当我们需要扩展我们的程序来处理以前没有处理过的情况时，函数允许我们在一个地方更改，并在每次调用函数时生效。
- `抽象`，为了使用一个函数，你只需要知道它的名字、输入、输出和它的位置。你不需要知道它是如何工作的，也不需要知道它依赖于其他什么代码。这就降低了使用其他人的代码(包括标准库中的所有代码)所需要的知识量。

虽然看起来不像，但每次使用 operator<< 或者 operator>> 进行输入或者输出时，都是在使用标准库提供的函数。

# 有效地使用函数

新手程序员遇到的最大挑战之一(除了学习语言)是了解何时以及如何有效的使用函数。这里有一些编写函数的基本准则：

- 在程序中出现一次以上的语句，一般应该做成函数。例如，如果我们以同样的方式多次读取用户的输入，那就是一个很好的函数候选。如果我们多次以同样的方式输出一些东西，那也是一个很好的函数候选。
- 有一组明确定义的输入和输出是函数的一个很好的候选，特别是当它很复杂的时候。例如，如果我们有一个要排序的项目列表，进行排序的代码将是一个很好的函数，即使它只做一次，输入的是未排序的列表，输出的是排序后的列表。
- 一个函数一般执行一项(也只有一项)任务。
- 当一个函数变得很长、很复杂或者难以理解的时候，可以将它拆分成多个子函数。这就是重构。我们将在 3.10 -- 在问题发生之前找到问题  中进一步讨论

一般来说，在学习C++的时候，会编写很多程序，其中涉及到三个子任务：

1. 读取用户的输入
2. 根据输入值计算输出
3. 打印记得得到的值

对于比较简单的程序(比如，少于20行代码)。部分或者全部可以在函数main中完成。然而，对于较长的程序(或者仅仅是为了练习)，每一个函数都可以单独使用。

新的程序员经常把计算一个值和打印计算值合并到一个函数中。然而，这违反了函数的"一个任务"的经验法则。一个计算值的函数应该将值返回给调用者，并让调用者决定如何处理计算值(比如调用另外一个函数打印该值)。

